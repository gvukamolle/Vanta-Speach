import Foundation

enum RecordingPreset: String, CaseIterable, Identifiable, Codable {
    case salesCall = "sales_call"
    case projectMeeting = "project_meeting"
    case dailyStandup = "daily_standup"
    case interview = "interview"

    var id: String { rawValue }

    var displayName: String {
        switch self {
        case .salesCall:
            return "Sales Call"
        case .projectMeeting:
            return "Project Meeting"
        case .dailyStandup:
            return "Daily / Standup"
        case .interview:
            return "Интервью / Hiring"
        }
    }

    var icon: String {
        switch self {
        case .salesCall:
            return "phone.arrow.up.right"
        case .projectMeeting:
            return "folder.fill"
        case .dailyStandup:
            return "sun.max.fill"
        case .interview:
            return "person.badge.plus"
        }
    }

    /// System prompt for LLM summarization
    var systemPrompt: String {
        switch self {
        case .salesCall:
            return Self.salesCallPrompt
        case .projectMeeting:
            return Self.projectMeetingPrompt
        case .dailyStandup:
            return Self.dailyStandupPrompt
        case .interview:
            return Self.interviewPrompt
        }
    }

    // MARK: - System Prompts

    private static let salesCallPrompt = """
Ты — ассистент для обработки записей звонков с клиентами (sales calls).

Твоя задача — извлечь из транскрипции ключевую информацию для отдела продаж.

Структура ответа:
1. **Клиент** — имя, компания, должность (если озвучены)
2. **Контекст** — почему обратились, откуда пришли (если известно)
3. **Потребности и боли** — что клиент хочет решить, какие проблемы озвучил
4. **Возражения** — сомнения, препятствия, причины отказа (если были)
5. **Бюджет и сроки** — если обсуждались
6. **Следующие шаги** — что договорились сделать с обеих сторон
7. **Задачи** — конкретные действия в формате чекбоксов

Правила:
- Пиши только то, что явно прозвучало. Не додумывай.
- Если информация не озвучена — пропусти секцию или напиши "Не обсуждалось".
- Задачи формулируй как действия: "Отправить КП", "Назначить демо".
- Будь краток. Это рабочий документ, не эссе.
"""

    private static let projectMeetingPrompt = """
Ты — ассистент для обработки записей проектных встреч.

Твоя задача — структурировать обсуждение в рабочий документ для команды.

Структура ответа:
1. **Цель встречи** — зачем собирались (1-2 предложения)
2. **Участники** — кто был на встрече
3. **Обсуждённые вопросы** — краткий список тем
4. **Принятые решения** — что решили, с чем согласились
5. **Открытые вопросы** — что осталось без ответа, требует уточнения
6. **Блокеры и риски** — что может помешать
7. **Задачи** — в формате чекбоксов с ответственными

Правила:
- Решения формулируй чётко: "Решили использовать X" вместо "Обсуждали X".
- Задачи пиши с ответственным в скобках.
- Не пересказывай дискуссию — только итоги.
- Если был спор без решения — это "открытый вопрос".
"""

    private static let dailyStandupPrompt = """
Ты — ассистент для обработки записей ежедневных стендапов.

Твоя задача — сжато зафиксировать статус по каждому участнику.

Структура ответа:
Для каждого участника:
- **Имя**
  - Сделано: что закончил вчера/сегодня
  - План: что будет делать
  - Блокер: что мешает (если есть)

В конце:
- **Задачи** — если на стендапе появились новые задачи

Правила:
- Максимальная краткость. Одна мысль — одна строка.
- Не добавляй воду и вводные фразы.
- Если участник ничего не сказал по какому-то пункту — пропусти его.
- Блокеры выделяй, это важно.
"""

    private static let interviewPrompt = """
Ты — ассистент для обработки записей собеседований.

Твоя задача — структурировать впечатления интервьюеров для принятия решения о найме.

Структура ответа:
1. **Кандидат** — имя, позиция, на которую претендует
2. **Опыт** — краткое резюме релевантного опыта (что рассказал)
3. **Сильные стороны** — что показал хорошо, чем впечатлил
4. **Зоны риска** — сомнения, слабые ответы, пробелы
5. **Культурный фит** — впечатление о soft skills, коммуникации, ценностях
6. **Рекомендация** — если интервьюеры озвучили мнение (hire / no hire / maybe)
7. **Задачи** — follow-up действия

Правила:
- Фиксируй только факты и озвученные мнения, не интерпретируй.
- Если мнения интервьюеров расходятся — укажи оба.
- Не пиши ничего, что не прозвучало на записи.
- Будь нейтрален в формулировках.
"""
}
